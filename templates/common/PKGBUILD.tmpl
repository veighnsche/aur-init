# Maintainer: @MAINTAINER@
pkgname=@PKGNAME@
pkgver=@PKGVER@
pkgrel=1
pkgdesc="@PKGDESC@"
@ARCH_LINE@
url="@PKGURL@"
license=('@PKGLICENSE@')
@DEPENDS_LINE@
@MAKEDEPENDS_LINE@

@SOURCE_AND_SHA@

@PKGVER_BLOCK@

prepare() {
  : # add preparation steps if needed
}

build() {
  : # add build steps if needed
@BUILD_BLOCK@
}

@CHECK_BLOCK@

package() {
@PACKAGE_BLOCK@

  # Optional: man page (check common locations)
  if [[ -f "$srcdir/$pkgname.1" ]]; then
    install -Dm644 /dev/stdin "$pkgdir/usr/share/man/man1/$pkgname.1.gz" <<<"$(gzip -9c "$srcdir/$pkgname.1")"
  elif [[ -f "$srcdir/man/$pkgname.1" ]]; then
    install -Dm644 /dev/stdin "$pkgdir/usr/share/man/man1/$pkgname.1.gz" <<<"$(gzip -9c "$srcdir/man/$pkgname.1")"
  elif [[ -f "$srcdir/docs/$pkgname.1" ]]; then
    install -Dm644 /dev/stdin "$pkgdir/usr/share/man/man1/$pkgname.1.gz" <<<"$(gzip -9c "$srcdir/docs/$pkgname.1")"
  fi

  # Optional: bash completion
  if [[ -f "$srcdir/completions/$pkgname.bash" ]]; then
    install -Dm644 "$srcdir/completions/$pkgname.bash" "$pkgdir/usr/share/bash-completion/completions/$pkgname"
  elif [[ -f "$srcdir/completions/bash/$pkgname" ]]; then
    install -Dm644 "$srcdir/completions/bash/$pkgname" "$pkgdir/usr/share/bash-completion/completions/$pkgname"
  fi

  # Optional: zsh completion
  if [[ -f "$srcdir/completions/zsh/_$pkgname" ]]; then
    install -Dm644 "$srcdir/completions/zsh/_$pkgname" "$pkgdir/usr/share/zsh/site-functions/_$pkgname"
  fi

  # Optional: fish completion
  if [[ -f "$srcdir/completions/fish/$pkgname.fish" ]]; then
    install -Dm644 "$srcdir/completions/fish/$pkgname.fish" "$pkgdir/usr/share/fish/completions/$pkgname.fish"
  fi
}
